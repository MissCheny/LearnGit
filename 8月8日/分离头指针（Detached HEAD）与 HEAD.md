## <center>分离头指针（Detached HEAD）与 HEAD</center>

### 一、什么是分离头指针？
当 Git 的 `HEAD` 指针**直接指向某个提交（commit）而非分支**时，称为 **分离头指针（Detached HEAD）** 状态。此时你不在任何分支上，新提交的代码可能丢失（除非主动创建分支保存）。

---

### 二、何时会触发分离头指针？
1. 直接检出提交哈希：`git switch abc123`  
2. 检出标签（Tag）：`git switch v1.0.0`  
3. 检出远程分支：`git switch origin/main`

---

### 三、如何安全操作？

**1️⃣ 进入分离头指针状态**
```bash
git switch --detach       # 从当前提交进入分离状态
git switch abc123         # 直接检出某个提交（自动进入分离状态）
```

**2️⃣ 在分离状态下提交代码**
```bash
# 修改代码后提交
git commit -m "临时提交"
```
⚠️ **此时提交的内容尚未绑定到任何分支！切换分支后会丢失这些提交**。

**3️⃣ 保存分离状态的提交**
```bash
# 创建新分支并保留提交
git switch -c new-branch  # -c 表示创建并切换
```

**4️⃣ 退出分离状态**
```bash
# 如果未提交代码，直接切换回原分支
git switch main

# 如果提交了代码但未保存，需先创建分支（见第3步）
```

---

### 四、常见问题

**Q：不小心在分离状态下提交了代码，如何找回？**  
A：用 `git reflog` 找到提交哈希，再创建分支指向它：
```bash
git switch -c rescue-branch abc123
```

**Q：分离头指针有什么实际用途？**  
A：临时查看历史代码或调试问题，无需创建分支。

---

### 关键总结
| 操作                | 命令                          |
|---------------------|-------------------------------|
| 进入分离状态        | `git switch --detach`         |
| 保存提交并创建分支  | `git switch -c <新分支名>`    |
| 退出分离状态        | `git switch <已有分支名>`     |

记住：**分离头状态下的提交必须主动创建分支保存**，否则切换分支后会丢失！