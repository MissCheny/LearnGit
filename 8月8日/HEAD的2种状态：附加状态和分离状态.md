# <center>HEAD的两种状态</center>

HEAD是一个指针，它指向当前工作分支的最新提交，或者直接指向某个特定的提交（在这种情况下称为分离状态）。  
HEAD有2种状态：

1. **附加状态（Attached HEAD）**：这是HEAD的正常状态，HEAD指向一个具体的分支。当你在某个分支上工作时，HEAD就是附加在这个分支上的。比如，如果你在`main`分支上工作，那么HEAD就附加在`main`分支上，指向`main`分支的最新提交。这种状态下，你所做的任何提交都会更新当前分支的最新提交，HEAD也会随之移动到新的最新提交上。

2. **分离状态（Detached HEAD）**：当HEAD不附加在任何分支上，而是直接指向某个提交时，HEAD就是分离的。这种情况通常发生在你直接检出一个旧的提交，而不是一个分支的最新提交时。在分离状态下工作意味着你在一个“没有名字”的历史位置上进行修改。这种状态下所做的任何提交都不会更新任何现有分支的指针，而是创建一个“孤儿”提交。如果你希望保留这些更改，你需要创建一个新的分支或标签来引用这些提交。


## <center>可视化</center>
### 附加状态（Attached HEAD）

```
A---B---C <--- main <--- HEAD
```

- `A`, `B`, `C` 是提交。
- `main` 是一个分支，指向最新的提交 `C`。
- `HEAD` 附加在 `main` 分支上，也指向最新的提交 `C`。

### 分离状态（Detached HEAD）

```
A---B---C <--- main
      ^
      |
     HEAD (分离状态)
```

- `A`, `B`, `C` 是提交。
- `main` 是一个分支，指向最新的提交 `C`。
- `HEAD` 直接指向提交 `B`，而不附加在任何一个分支上，这就是分离状态。

在分离状态下，如果你创建了一个新的提交 `D`，它看起来会像这样：

```
A---B---C <--- main
      ^
      |
     D <--- HEAD (分离状态)
```

此时，`HEAD` 仍然不附加在任何分支上，而是指向新的提交 `D`。如果你希望保留这个新的提交，并让它成为一个分支的一部分，你需要创建一个新的分支来指向 `D`：

```
A---B---C <--- main
      ^
      |
D <--- new_branch <--- HEAD (附加状态)
```

在这个图中，`new_branch` 是一个新的分支，指向 `D`，而 `HEAD` 也附加在 `new_branch` 上了。