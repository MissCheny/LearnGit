## 16.2.1 编写pre-commit钩子

pre-commit钩子在提交操作执行前执行。下面以pre-commit钩子来演示一个最简单的钩子使用。

(1) 初始化一个Git仓库，在.git/hooks目录中将pre-commit.sample的后缀.sample去掉。这样，这个钩子就生效了。  
(2) 将.git/hooks目录中的pre-commit文件的内容编辑为如下。  

<table><tr><td style='vertical-align:top; width:60%'>

```
# !/bin/sh
echo "pre-commit钩子阻止了提交！！！！"
exit 1                # 非 0 状态退出， Git 将阻止任何提交操作
```

</td><td style='vertical-align:top;'>
注意这里的 <code>#!/bin/sh</code> 是必须的，因为Git在执行钩子时，默认使用的是Bash。

Shebang（`#!`）是文件的「身份证」，告诉电脑该文件需要用哪个解释器来执行。

</td></tr></table>

(3)在Git仓库中提交文件。

```
git log --oneline
aa145b4(HEAD -> master)111

echo "222" >> aaa.txt
git add ./
git commit -m '222' ./
pre-commit钩子阻止了提交!             # 阻止了提交
On branch master
nothing to commit,working tree clean

git log --oneline                     # 发现并没有提交成功
aa145b4(HEAD -> master)111
```